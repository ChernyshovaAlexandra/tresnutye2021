{"ast":null,"code":"import _slicedToArray from\"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import LoginForm from\"./LoginForm\";import UserForm from\"./UserForm\";import UserAccount from\"./UserAccount\";import API from\"../../utils/API.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function FormComponent(_ref){var setForm=_ref.setForm,form=_ref.form;var _useState=useState(window.localStorage.getItem('tresnutye2021-token')),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setUserData=_useState4[1];var loginUser=function loginUser(){API.get('/profile').then(function(res){if(res.data.data){setUserData(res.data.data);}});};useEffect(function(){if(token){loginUser();}},[token]);var close=function close(){document.querySelector(\"#root\").classList.remove(\"scrolled\");setForm(false);};return/*#__PURE__*/_jsx(\"div\",{className:form?\"modalBox \":\"modalBox hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modalBox__container \".concat(!token?'phone':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"close-btn__container cursor-pointer relative z-30\",onClick:close,children:/*#__PURE__*/_jsxs(\"div\",{className:\"close-btn\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"modalBox__container__content\",children:token?/*#__PURE__*/_jsx(_Fragment,{children:!userData?/*#__PURE__*/_jsx(UserForm,{setForm:setForm,form:form}):/*#__PURE__*/_jsx(UserAccount,{})}):/*#__PURE__*/_jsx(LoginForm,{setToken:this.setToken})})]})});}","map":{"version":3,"sources":["/Users/alexandrach/Projects/tresnutye2021/src/components/FormComponent/index.jsx"],"names":["React","useState","useEffect","LoginForm","UserForm","UserAccount","API","FormComponent","setForm","form","window","localStorage","getItem","token","setToken","userData","setUserData","loginUser","get","then","res","data","close","document","querySelector","classList","remove"],"mappings":"gKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,GAAP,KAAgB,oBAAhB,C,6IAKA,cAAe,SAASC,CAAAA,aAAT,MAA0C,IAAjBC,CAAAA,OAAiB,MAAjBA,OAAiB,CAARC,IAAQ,MAARA,IAAQ,CACvD,cAA0BR,QAAQ,CAACS,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,qBAA5B,CAAD,CAAlC,wCAAOC,KAAP,eAAcC,QAAd,eACA,eAAgCb,QAAQ,CAAC,KAAD,CAAxC,yCAAOc,QAAP,eAAiBC,WAAjB,eACA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtBX,GAAG,CAACY,GAAJ,CAAQ,UAAR,EACGC,IADH,CAEI,SAAAC,GAAG,CAAI,CACL,GAAIA,GAAG,CAACC,IAAJ,CAASA,IAAb,CAAmB,CACjBL,WAAW,CAACI,GAAG,CAACC,IAAJ,CAASA,IAAV,CAAX,CACD,CACF,CANL,EAQD,CATD,CAUAnB,SAAS,CAAC,UAAM,CACd,GAAIW,KAAJ,CAAW,CACTI,SAAS,GACV,CACF,CAJQ,CAIN,CAACJ,KAAD,CAJM,CAAT,CAOA,GAAMS,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAClBC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,EAAgCC,SAAhC,CAA0CC,MAA1C,CAAiD,UAAjD,EACAlB,OAAO,CAAC,KAAD,CAAP,CACD,CAHD,CAIA,mBACE,YAAK,SAAS,CAAEC,IAAI,CAAG,WAAH,CAAiB,iBAArC,uBACE,aAAK,SAAS,+BAAyB,CAACI,KAAD,CAAS,OAAT,CAAmB,EAA5C,CAAd,wBACE,YAAK,SAAS,CAAC,mDAAf,CAAmE,OAAO,CAAES,KAA5E,uBACE,aAAK,SAAS,CAAC,WAAf,wBACE,eADF,cAEE,eAFF,GADF,EADF,cAOE,YAAK,SAAS,CAAC,8BAAf,UACGT,KAAK,cACJ,yBACG,CAACE,QAAD,cAAY,KAAC,QAAD,EAAU,OAAO,CAAEP,OAAnB,CAA4B,IAAI,CAAEC,IAAlC,EAAZ,cAAyD,KAAC,WAAD,IAD5D,EADI,cAKJ,KAAC,SAAD,EAAW,QAAQ,CAAE,KAAKK,QAA1B,EANJ,EAPF,GADF,EADF,CAoBD","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport LoginForm from \"./LoginForm\";\nimport UserForm from \"./UserForm\";\nimport UserAccount from \"./UserAccount\";\nimport API from \"../../utils/API.js\";\n\n\n\n\nexport default function FormComponent({ setForm, form }) {\n  const [token, setToken] = useState(window.localStorage.getItem('tresnutye2021-token'))\n  const [userData, setUserData] = useState(false)\n  const loginUser = () => {\n    API.get('/profile')\n      .then(\n        res => {\n          if (res.data.data) {\n            setUserData(res.data.data)\n          }\n        }\n      )\n  }\n  useEffect(() => {\n    if (token) {\n      loginUser()\n    }\n  }, [token])\n\n\n  const close = () => {\n    document.querySelector(\"#root\").classList.remove(\"scrolled\");\n    setForm(false)\n  }\n  return (\n    <div className={form ? \"modalBox \" : \"modalBox hidden\"}>\n      <div className={`modalBox__container ${!token ? 'phone' : ''}`}>\n        <div className=\"close-btn__container cursor-pointer relative z-30\" onClick={close}>\n          <div className=\"close-btn\">\n            <span></span>\n            <span></span>\n          </div>\n        </div>\n        <div className=\"modalBox__container__content\">\n          {token ?\n            <>\n              {!userData ? <UserForm setForm={setForm} form={form} /> : <UserAccount />}\n            </>\n            :\n            <LoginForm setToken={this.setToken} />}\n        </div>\n      </div>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}