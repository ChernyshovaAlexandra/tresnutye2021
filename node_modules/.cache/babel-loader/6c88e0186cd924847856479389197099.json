{"ast":null,"code":"import _regeneratorRuntime from \"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/alexandrach/Projects/tresnutye2021/src/components/Sponsors.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport productsAPI from '../utils/productsAPI';\nimport { Select, FormControl, InputLabel, MenuItem } from \"@material-ui/core\";\nimport $ from \"jquery\";\nimport Carousel from './elements/Carousel';\nimport arr from '../assets/img/btn-arr.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Sponsors(_ref) {\n  _s();\n\n  var _this = this;\n\n  var full = _ref.full;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      products = _useState2[0],\n      setProducts = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userData = _useState4[0],\n      setUserData = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      filtredData = _useState6[0],\n      filterUserData = _useState6[1];\n\n  var _useState7 = useState(20),\n      _useState8 = _slicedToArray(_useState7, 2),\n      maxLength = _useState8[0],\n      setMaxLength = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      regions = _useState10[0],\n      setRegions = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      region = _useState12[0],\n      setRegion = _useState12[1];\n\n  var _useState13 = useState(16),\n      _useState14 = _slicedToArray(_useState13, 2),\n      goodsLength = _useState14[0],\n      setGoodsLength = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      mechanic = _useState16[0],\n      setMechanic = _useState16[1];\n\n  var _useState17 = useState('Все'),\n      _useState18 = _slicedToArray(_useState17, 2),\n      mech = _useState18[0],\n      setMech = _useState18[1];\n\n  var _useState19 = useState(''),\n      _useState20 = _slicedToArray(_useState19, 2),\n      start = _useState20[0],\n      setStart = _useState20[1];\n\n  var _useState21 = useState(''),\n      _useState22 = _slicedToArray(_useState21, 2),\n      end = _useState22[0],\n      setEnd = _useState22[1];\n\n  function fetchProducts() {\n    return _fetchProducts.apply(this, arguments);\n  }\n\n  function _fetchProducts() {\n    _fetchProducts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response, _mechanic, data, regionsRecieved, key, _userData;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!full) {\n                _context.next = 22;\n                break;\n              }\n\n              _context.next = 3;\n              return productsAPI.get(\"/region-products\", {\n                params: {\n                  project: 'tresnutye'\n                }\n              });\n\n            case 3:\n              response = _context.sent;\n              setProducts(response.data.products);\n              _mechanic = response.data.filter.mechanic_counts;\n\n              _mechanic.unshift('Все');\n\n              setMech('Все');\n              setMechanic(_mechanic);\n              setStart(response.data.start);\n              setEnd(response.data.end);\n              data = response.data.products;\n              regionsRecieved = [];\n\n              for (key in data) {\n                regionsRecieved.push(key);\n              }\n\n              _userData = data[regionsRecieved[0]] ? data[regionsRecieved[0]] : [];\n              setUserData(_userData);\n              filterUserData(_userData);\n              setMaxLength(_userData.length);\n              setRegions(regionsRecieved);\n              setRegion(regionsRecieved[0]);\n              _context.next = 23;\n              break;\n\n            case 22:\n              productsAPI.get(\"/main-page-products\", {\n                params: {\n                  project: 'tresnutye'\n                }\n              }).then(function (res) {\n                //console.log('res.data', res.data)\n                setUserData(res.data.data);\n                setStart(res.data.start);\n                setEnd(res.data.end);\n              });\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetchProducts.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    fetchProducts();\n  }, [full]);\n\n  function handleChange(e) {\n    var regionNew = e.target.value;\n    setRegion(regionNew);\n    setGoodsLength(16);\n    setUserData(products[regionNew]);\n\n    if (mech === 'Все') {\n      filterUserData(products[regionNew]);\n      setMaxLength(products[regionNew].length);\n    } else {\n      var newData = products[regionNew].filter(function (item) {\n        return item[0].mechanic_counts === mech;\n      });\n      filterUserData(newData);\n      setMaxLength(newData.length);\n    } //console.log(userData.length)\n\n  }\n\n  var changeMech = function changeMech(e) {\n    var mechNew = e.target.value;\n    setMech(mechNew);\n    setGoodsLength(16);\n\n    if (e.target.value === 'Все') {\n      //console.log('all', userData)\n      filterUserData(userData);\n      setMaxLength(userData.length);\n    } else {\n      var newData = userData.filter(function (item) {\n        return item[0].mechanic_counts === mechNew;\n      });\n      filterUserData(newData);\n      setMaxLength(newData.length);\n    }\n  };\n\n  function more() {\n    var top = $(\".loadMore\").offset().top;\n    $(\"html,body\").animate({\n      scrollTop: top\n    }, \"slow\");\n    setGoodsLength(function (goodsLength) {\n      return goodsLength + 16;\n    });\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"sponsors py-20 \".concat(full ? 'pt-36 full' : ''),\n    id: \"sponsors\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:flex gap-4 justify-between items-center\",\n        id: \"sponsors\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-yellow text-left text-3xl xl:text-4xl 2xl:text-5xl mb-8\",\n          children: [\"\\u0442\\u043E\\u0432\\u0430\\u0440\\u044B-\\u0441\\u043F\\u043E\\u043D\\u0441\\u043E\\u0440\\u044B\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            style: {\n              fontSize: \"70%\"\n            },\n            children: \"\\u0441 \".concat(start, \" \\u0434\\u043E \").concat(end)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), full ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(FormControl, {\n            className: \"text-white in-full-sponsors mb-4\",\n            variant: \"outlined\",\n            style: {\n              width: \"300px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              htmlFor: \"outlined-age-native-simple\",\n              children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0433\\u0438\\u043E\\u043D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"demo-customized-select-label\",\n              id: \"demo-customized-select\",\n              value: region,\n              onChange: function onChange(e) {\n                return handleChange(e);\n              },\n              label: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0433\\u0438\\u043E\\u043D\",\n              inputProps: {\n                name: \"Выберите регион\",\n                id: \"outlined-age-native-simple\"\n              },\n              children: regions.map(function (item, index) {\n                return /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: item,\n                  children: item\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 41\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            className: \"text-white in-full-sponsors\",\n            variant: \"outlined\",\n            style: {\n              width: \"300px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              htmlFor: \"outlined-age-native-simple\",\n              children: \"\\u041C\\u0435\\u0445\\u0430\\u043D\\u0438\\u043A\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"demo-customized-select-label\",\n              id: \"demo-customized-select\",\n              value: mech,\n              onChange: function onChange(e) {\n                return changeMech(e);\n              },\n              label: \"\\u041C\\u0435\\u0445\\u0430\\u043D\\u0438\\u043A\\u0430\",\n              inputProps: {\n                name: \"Механика\",\n                id: \"outlined-age-native-simple\"\n              },\n              children: mechanic.map(function (item, index) {\n                return /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: item,\n                  children: item\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 41\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this) : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), full ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-3 lg:grid-cols-4  grid-cols-2 mt-8 mx-auto sponsors-grid ubuntu\",\n        children: filtredData && filtredData.length !== 0 ? filtredData.slice(0, goodsLength).map(function (item, id) {\n          return /*#__PURE__*/_jsxDEV(Carousel, {\n            data: item,\n            marked: item.length > 1\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 29\n          }, _this);\n        }) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-3 lg:grid-cols-4  grid-cols-2 mt-8 mx-auto sponsors-grid ubuntu\",\n        children: userData && userData.length ? userData.slice(0, goodsLength).map(function (item, id) {\n          return /*#__PURE__*/_jsxDEV(Carousel, {\n            data: item,\n            marked: item.length > 1\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 33\n          }, _this);\n        }) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid place-items-center\",\n        children: !full ? /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/sponsors\",\n          className: \"btn grid mt-8 py-4 px-8\",\n          style: {\n            width: 'fit-content'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u041F\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u0432\\u0441\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: arr,\n            className: \"ml-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 25\n        }, this) : goodsLength < maxLength ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn grid py-4 px-8 w-fit mx-auto mt-8 loadMore\",\n          onClick: function onClick(e) {\n            return more(e);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0435\\u0449\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: arr,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 29\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Sponsors, \"SCMqqTsag/0V/AeAfPovEmfmWjM=\");\n\n_c = Sponsors;\n\nvar _c;\n\n$RefreshReg$(_c, \"Sponsors\");","map":{"version":3,"sources":["/Users/alexandrach/Projects/tresnutye2021/src/components/Sponsors.jsx"],"names":["React","useEffect","useState","Link","productsAPI","Select","FormControl","InputLabel","MenuItem","$","Carousel","arr","Sponsors","full","products","setProducts","userData","setUserData","filtredData","filterUserData","maxLength","setMaxLength","regions","setRegions","region","setRegion","goodsLength","setGoodsLength","mechanic","setMechanic","mech","setMech","start","setStart","end","setEnd","fetchProducts","get","params","project","response","data","filter","mechanic_counts","unshift","regionsRecieved","key","push","length","then","res","handleChange","e","regionNew","target","value","newData","item","changeMech","mechNew","more","top","offset","animate","scrollTop","fontSize","width","name","id","map","index","slice"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport productsAPI from '../utils/productsAPI';\nimport { Select, FormControl, InputLabel, MenuItem } from \"@material-ui/core\";\nimport $ from \"jquery\";\nimport Carousel from './elements/Carousel';\nimport arr from '../assets/img/btn-arr.png'\n\n\n\n\n\nexport default function Sponsors({ full }) {\n   \n    const [products, setProducts] = useState([]);\n    const [userData, setUserData] = useState([]);\n    const [filtredData, filterUserData] = useState([])\n    const [maxLength, setMaxLength] = useState(20);\n    const [regions, setRegions] = useState([]);\n    const [region, setRegion] = useState('');\n    const [goodsLength, setGoodsLength] = useState(16);\n    const [mechanic, setMechanic] = useState([]);\n    const [mech, setMech] = useState('Все');\n    const [start, setStart] = useState('');\n    const [end, setEnd] = useState('');\n\n\n    async function fetchProducts() {\n        if (full) {\n            //console.log(`full`)\n            let response = await productsAPI.get(\"/region-products\", {\n                params: { project: 'tresnutye' }\n            });\n\n            setProducts(response.data.products);\n            let mechanic = response.data.filter.mechanic_counts;\n            mechanic.unshift('Все');\n            setMech('Все');\n            setMechanic(mechanic);\n            setStart(response.data.start);\n            setEnd(response.data.end);\n\n            let data = response.data.products;\n\n            let regionsRecieved = [];\n            for (let key in data) {\n                regionsRecieved.push(key);\n            }\n            let userData = data[regionsRecieved[0]] ? data[regionsRecieved[0]] : [];\n\n            setUserData(userData);\n            filterUserData(userData)\n            setMaxLength(userData.length);\n            setRegions(regionsRecieved);\n            setRegion(regionsRecieved[0]);\n\n        } else {\n            productsAPI.get(\"/main-page-products\", {\n                params: { project: 'tresnutye' }\n            }).then(\n                (res) => {\n                    //console.log('res.data', res.data)\n                    setUserData(res.data.data)\n                    setStart(res.data.start);\n                    setEnd(res.data.end);\n                }\n            )\n\n        }\n    }\n\n    useEffect(() => {\n\n        fetchProducts();\n    }, [full]);\n\n    function handleChange(e) {\n        let regionNew = e.target.value;\n        setRegion(regionNew);\n        setGoodsLength(16);\n        setUserData(products[regionNew])\n        if (mech === 'Все') {\n            filterUserData(products[regionNew])\n            setMaxLength(products[regionNew].length);\n        } else {\n            let newData = products[regionNew].filter(item =>  item[0].mechanic_counts === mech);\n            filterUserData(newData);\n            setMaxLength(newData.length);\n        }\n        //console.log(userData.length)\n    }\n\n    const changeMech = (e) => {\n        let mechNew = e.target.value\n        setMech(mechNew)\n        setGoodsLength(16);\n        if (e.target.value === 'Все') {\n            //console.log('all', userData)\n            filterUserData(userData)\n            setMaxLength(userData.length);\n        } else {\n            let newData = userData.filter(item => item[0].mechanic_counts === mechNew);\n            filterUserData(newData);\n            setMaxLength(newData.length);\n        }\n    }\n\n    function more() {\n        let top = $(\".loadMore\").offset().top;\n        $(\"html,body\").animate({ scrollTop: top }, \"slow\");\n        setGoodsLength(goodsLength => goodsLength + 16);\n    };\n\n\n\n\n\n    return (\n        <section className={`sponsors py-20 ${full ? 'pt-36 full' : ''}`} id=\"sponsors\">\n            <div className='container mx-auto'>\n                <div className=\"md:flex gap-4 justify-between items-center\" id='sponsors'>\n                    <h2 className='text-yellow text-left text-3xl xl:text-4xl 2xl:text-5xl mb-8'>\n                        товары-спонсоры\n                        <br />\n                        <small style={{ fontSize: `70%` }}>{`с ${start} до ${end}`}</small>\n                    </h2>\n\n                    {full ?\n                        <div className='flex flex-col'>\n                            <FormControl className='text-white in-full-sponsors mb-4' variant=\"outlined\" style={{ width: `300px` }}>\n                                <InputLabel htmlFor=\"outlined-age-native-simple\">\n                                    Выберите регион\n                                </InputLabel>\n                                <Select\n                                    labelId=\"demo-customized-select-label\"\n                                    id=\"demo-customized-select\"\n                                    value={region}\n                                    onChange={(e) => handleChange(e)}\n                                    label=\"Выберите регион\"\n                                    inputProps={{\n                                        name: \"Выберите регион\",\n                                        id: \"outlined-age-native-simple\",\n                                    }}\n                                >\n                                    {regions.map((item, index) => (\n                                        <MenuItem value={item} key={index}>\n                                            {item}\n                                        </MenuItem>\n                                    ))}\n                                </Select>\n                            </FormControl>\n                            <FormControl className='text-white in-full-sponsors' variant=\"outlined\" style={{ width: `300px` }}>\n                                <InputLabel htmlFor=\"outlined-age-native-simple\">\n                                    Механика\n                                </InputLabel>\n                                <Select\n                                    labelId=\"demo-customized-select-label\"\n                                    id=\"demo-customized-select\"\n                                    value={mech}\n                                    onChange={(e) => changeMech(e)}\n                                    label=\"Механика\"\n                                    inputProps={{\n                                        name: \"Механика\",\n                                        id: \"outlined-age-native-simple\",\n                                    }}\n                                >\n                                    {mechanic.map((item, index) => (\n                                        <MenuItem value={item} key={index}>\n                                            {item}\n                                        </MenuItem>\n                                    ))}\n                                </Select>\n                            </FormControl>\n                        </div>\n\n\n                        : ''}\n                </div>\n\n                {full ?\n                    <div className='grid md:grid-cols-3 lg:grid-cols-4  grid-cols-2 mt-8 mx-auto sponsors-grid ubuntu'>\n                        {filtredData && filtredData.length !== 0 ? filtredData.slice(0, goodsLength).map((item, id) => (\n                            <Carousel key={id} data={item} marked={item.length > 1} />\n                        )) : null}\n                    </div>\n                    :\n                    <div className='grid md:grid-cols-3 lg:grid-cols-4  grid-cols-2 mt-8 mx-auto sponsors-grid ubuntu'>\n                        {userData && userData.length ?\n                            userData.slice(0, goodsLength).map((item, id) => (\n                                <Carousel key={id} data={item} marked={item.length > 1} />\n                            ))\n\n                            : null}\n                    </div>\n                }\n                <div className='grid place-items-center'>\n                    {!full ?\n                        <Link to=\"/sponsors\" className='btn grid mt-8 py-4 px-8' style={{ width: 'fit-content' }}>\n                            <span>Посмотреть все товары </span>\n                            <img src={arr} className='ml-2' />\n                        </Link>\n                        :\n                        goodsLength < maxLength ? (\n                            <button\n                                className='btn grid py-4 px-8 w-fit mx-auto mt-8 loadMore'\n                                onClick={(e) => more(e)}>\n                                <span>Загрузить еще</span>\n                                <img src={arr} alt=\"\" />\n                            </button>\n                        ) : null\n                    }\n                </div>\n            </div>\n        </section>\n\n    );\n}\n"]},"metadata":{},"sourceType":"module"}