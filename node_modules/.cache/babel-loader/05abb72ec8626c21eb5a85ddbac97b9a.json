{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Checkbox,FormControl,FormControlLabel,InputLabel,MenuItem,Select,TextField}from\"@material-ui/core\";import React,{useState}from\"react\";import{REGION_LIST}from'../Map/REGION_LIST.js';//import Select from \"react-select\";\nimport{useForm,Controller}from'react-hook-form';import arr from'../../assets/img/btn-arr.png';import API from\"../../utils/API.js\";import{yupResolver}from'@hookform/resolvers/yup';import*as yup from\"yup\";// import DesktopDatePicker from '@mui/lab/DesktopDatePicker';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var schema=yup.object().shape({file:yup.mixed().test('required',\"You need to provide a file\",function(value){return value&&value.length;}).test(\"fileSize\",\"The file is too large\",function(value,context){return value&&value[0]&&value[0].size<=2000000;}).test(\"type\",\"We only support jpeg\",function(value){return value&&value[0]&&value[0].type===\"image/jpeg\";}),first_name:yup.string().required('Обязательно').min(3,'Минимум 3 символа').max(30,'Максимум 30 символов').matches(/[А-ЯЁA-Z]{2,15}/i,'Только буквы и пробел'),email:yup.string().required('Обязательно').matches(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,'Неправильный адрес электронной почты'),date:yup.string().required('Обязательно'),region:yup.string().required('Обязательно'),agree:yup.bool().oneOf([true],'Field must be checked')});export default function UserForm(_ref){var close=_ref.close;var _useState=useState({first_name:\"\",email:\"\",file:\"\",region:\"\",agree:\"\",date:\"\"}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),file=_useState4[0],setFile=_useState4[1];var handleChange=function handleChange(e){var key=e.target.id;var value=e.target.value;setValues(function(values){return _objectSpread(_objectSpread({},values),{},_defineProperty({},key,value));});};var setFileValue=function setFileValue(e){setFile(document.getElementById('file').files[0]);};var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,control=_useForm.control,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();console.log(data);formData.append('first_name',data.first_name);formData.append('email',data.email);formData.append('file',data.file);formData.append('region',data.region);formData.append('date',data.date);API.post('/eggs_photo',formData).then(function(res){console.log(res.data);});case 8:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-violet text-5xl mb-4\",children:\"\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-violet\",children:\"\\u041F\\u0440\\u0438\\u043D\\u044F\\u0442\\u044C \\u0443\\u0447\\u0430\\u0441\\u0442\\u0438\\u0435 \\u0432 \\u0440\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448\\u0435 \\u043C\\u043E\\u0433\\u0443\\u0442 \\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u043B\\u0438\\u0446\\u0430, \\u0434\\u043E\\u0441\\u0442\\u0438\\u0433\\u0448\\u0438\\u0435 18 \\u043B\\u0435\\u0442\"})]})})}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid lg:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({className:\"w-full\",id:\"first_name\",name:\"first_name\",label:\"\\u0418\\u043C\\u044F\",variant:\"outlined\",error:errors.first_name,value:values.first_name,helperText:errors.first_name&&errors.first_name.message},register(\"first_name\")),{},{onChange:handleChange}))}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({label:\"E-mail\",id:\"email\",value:values.email,variant:\"outlined\",error:errors.email,helperText:errors.email&&errors.email.message},register(\"email\")),{},{onChange:handleChange}))}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({id:\"date\",variant:\"outlined\",label:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F\",type:\"date\",InputLabelProps:{shrink:true},error:errors.date,helperText:errors.date&&errors.date.message},register(\"date\")),{},{onChange:handleChange}))}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full\",children:[/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"outlined-age-native-simple\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0433\\u0438\\u043E\\u043D\"}),/*#__PURE__*/_jsx(Controller,{name:\"region\",control:control,render:function render(_ref3){var _ref3$field=_ref3.field,value=_ref3$field.value,onChange=_ref3$field.onChange;return/*#__PURE__*/_jsx(Select,{labelId:\"demo-customized-select-label\",value:value,onChange:onChange,label:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0433\\u0438\\u043E\\u043D\",inputProps:{name:\"Выберите регион\",id:\"outlined-age-native-simple\"},children:REGION_LIST.map(function(item,index){return/*#__PURE__*/_jsx(MenuItem,{value:item.city,children:item.city},index);})});}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red ml-3\",children:errors.region&&errors.region.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full file relative\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"file\",className:\"w-full\",name:\"file\",id:\"file\"},register(\"file\")),{},{onChange:setFileValue})),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file\",className:\"w-full\",children:[file?file.name:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E \\u043A\\u043E\\u0440\\u043E\\u0431\\u043A\\u0438 \\u0441 \\u044F\\u0439\\u0446\\u0430\\u043C\\u0438\",/*#__PURE__*/_jsx(\"div\",{className:\"btn lil-btn\",children:\"+\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red mt-14 ml-3\",children:errors.file&&errors.file.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full \",children:[/*#__PURE__*/_jsx(FormControlLabel,_objectSpread(_objectSpread({className:\"w-full check-box\",style:{color:'#520084'},control:/*#__PURE__*/_jsx(Checkbox,{}),id:\"agree\"},register(\"agree\")),{},{label:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u042F \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0435\\u043D \\u0441 \",/*#__PURE__*/_jsx(\"a\",{className:\"underline hover:no-underline\",href:\"https://dixy.ru/politika-obrabotki-i-zashity.pdf\",target:\"_blank\",children:\"\\u0443\\u0441\\u043B\\u043E\\u0432\\u0438\\u044F\\u043C\\u0438 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0438 \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"})]})})),/*#__PURE__*/_jsx(\"p\",{className:\"text-red\",children:errors.agree&&errors.agree.message})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto\",style:{width:'fit-content',display:'grid'},children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn grid mt-8 py-4 px-8\",type:\"submit\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"img\",{src:arr,alt:\"\"})]})})]})]});}","map":{"version":3,"sources":["/Users/alexandrach/Projects/tresnutye2021/src/components/FormComponent/UserForm.jsx"],"names":["Checkbox","FormControl","FormControlLabel","InputLabel","MenuItem","Select","TextField","React","useState","REGION_LIST","useForm","Controller","arr","API","yupResolver","yup","schema","object","shape","file","mixed","test","value","length","context","size","type","first_name","string","required","min","max","matches","email","date","region","agree","bool","oneOf","UserForm","close","values","setValues","setFile","handleChange","e","key","target","id","setFileValue","document","getElementById","files","resolver","register","control","handleSubmit","errors","formState","onSubmit","data","formData","FormData","console","log","append","post","then","res","message","shrink","field","onChange","name","map","item","index","city","color","width","display"],"mappings":"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","sourcesContent":["import { Checkbox, FormControl, FormControlLabel, InputLabel, MenuItem, Select, TextField } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { REGION_LIST } from '../Map/REGION_LIST.js'\n//import Select from \"react-select\";\nimport { useForm, Controller } from 'react-hook-form'\nimport arr from '../../assets/img/btn-arr.png'\nimport API from \"../../utils/API.js\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from \"yup\";\n// import DesktopDatePicker from '@mui/lab/DesktopDatePicker';\n\nconst schema = yup.object().shape({\n    file: yup.mixed()\n        .test('required', \"You need to provide a file\", (value) =>{\n            return value && value.length\n        } )\n        .test(\"fileSize\", \"The file is too large\", (value, context) => {\n            return value && value[0] && value[0].size <= 2000000;\n        })\n        .test(\"type\", \"We only support jpeg\", function (value) {\n            return value && value[0] && value[0].type === \"image/jpeg\";\n        }),\n    first_name: yup.string()\n        .required('Обязательно')\n        .min(3, 'Минимум 3 символа')\n        .max(30, 'Максимум 30 символов')\n        .matches(/[А-ЯЁA-Z]{2,15}/i, 'Только буквы и пробел'),\n    email: yup.string()\n        .required('Обязательно')\n        .matches(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i, 'Неправильный адрес электронной почты'),\n    date: yup.string()\n        .required('Обязательно'),\n    region: yup.string()\n        .required('Обязательно'),\n    agree: yup.bool().oneOf([true], 'Field must be checked'),\n\n});\n\nexport default function UserForm({ close }) {\n    const [values, setValues] = useState({\n        first_name: \"\",\n        email: \"\",\n        file: \"\",\n        region: \"\",\n        agree: \"\",\n        date: \"\"\n    })\n    const [file, setFile] = useState()\n    const handleChange = (e) => {\n        const key = e.target.id;\n        const value = e.target.value\n        setValues(values => ({\n            ...values,\n            [key]: value,\n        }))\n    }\n\n    const setFileValue = (e) => {\n        setFile(document.getElementById('file').files[0])\n    }\n\n    const { register, control, handleSubmit, formState: { errors } } = useForm({\n        resolver: yupResolver(schema),\n    });\n    const onSubmit = async data => {\n        let formData = new FormData();\n        console.log(data)\n        formData.append('first_name', data.first_name)\n        formData.append('email', data.email)\n        formData.append('file', data.file)\n        formData.append('region', data.region)\n        formData.append('date', data.date)\n\n        API.post('/eggs_photo', formData)\n            .then(\n                res => {\n                    console.log(res.data)\n                }\n            )\n    };\n\n    return (\n        <div className=\"row justify-content-center\">\n            <header >\n                <div className=\"row justify-content-center\">\n                    <div className=\"col-lg-auto\">\n                        <h2 className='text-violet text-5xl mb-4'>\n                            регистрация\n                        </h2>\n                        <p className='text-violet'>Принять участие в розыгрыше могут только лица, достигшие 18 лет</p>\n                    </div>\n                </div>\n\n            </header>\n            <form\n                className='mt-8'\n                onSubmit={handleSubmit(onSubmit)}\n            >\n                <div className=\"grid lg:grid-cols-2 gap-4\">\n                    <div className=\"w-full\">\n                        <TextField\n                            className=\"w-full\"\n                            id=\"first_name\"\n                            name=\"first_name\"\n                            label=\"Имя\"\n                            variant=\"outlined\"\n                            error={errors.first_name}\n                            value={values.first_name}\n                            helperText={errors.first_name && errors.first_name.message}\n                            {...register(\"first_name\")}\n                            onChange={handleChange}\n                        />\n\n                    </div>\n                    <div className=\"w-full\">\n                        <TextField\n                            label=\"E-mail\"\n                            id=\"email\"\n                            value={values.email}\n                            variant=\"outlined\"\n                            error={errors.email}\n                            helperText={errors.email && errors.email.message}\n                            {...register(\"email\")}\n                            onChange={handleChange}\n                        />\n                    </div>\n                    <div className=\"w-full\">\n                        <TextField\n                            id=\"date\"\n                            variant=\"outlined\"\n                            label=\"Дата рождения\"\n                            type=\"date\"\n                            InputLabelProps={{\n                                shrink: true,\n                            }}\n                            error={errors.date}\n                            helperText={errors.date && errors.date.message}\n                            {...register(\"date\")}\n                            onChange={handleChange}\n                        />\n                    </div>\n                    <div className=\"w-full\">\n                        <FormControl variant=\"outlined\">\n                            <InputLabel htmlFor=\"outlined-age-native-simple\">\n                                Выберите регион\n                            </InputLabel>\n                            <Controller\n                                name=\"region\"\n                                control={control}\n                                render={({ field: { value, onChange } }) => (\n                                    <Select\n                                        labelId=\"demo-customized-select-label\"\n                                        value={value}\n                                        onChange={onChange}\n                                        label=\"Выберите регион\"\n                                        inputProps={{\n                                            name: \"Выберите регион\",\n                                            id: \"outlined-age-native-simple\",\n                                        }}\n                                    >\n                                        {REGION_LIST.map((item, index) => (\n                                            <MenuItem value={item.city} key={index}>{item.city}</MenuItem>\n                                        ))}\n                                    </Select>)\n                                }\n                            />\n\n                        </FormControl>\n                        <div className='text-red ml-3'>{errors.region && errors.region.message}</div>\n                    </div>\n                    <div className=\"w-full file relative\">\n                        <input\n                            type=\"file\"\n                            className=\"w-full\"\n                            name=\"file\"\n                            id=\"file\"\n                            {...register(\"file\")}\n                            onChange={setFileValue}\n                        />\n                        <label htmlFor=\"file\" className='w-full'>{file ? file.name : `Загрузить фото коробки с яйцами`}\n                            <div className=\"btn lil-btn\">+</div>\n                        </label>\n                        <div className='text-red mt-14 ml-3'>{errors.file && errors.file.message}</div>\n                    </div>\n                    <div className=\"w-full \">\n                        <FormControlLabel\n                            className='w-full check-box'\n                            style={{ color: '#520084' }}\n                            control={<Checkbox />}\n                            id=\"agree\"\n                            {...register(\"agree\")}\n                            label={<p>Я согласен с <a className='underline hover:no-underline' href='https://dixy.ru/politika-obrabotki-i-zashity.pdf' target='_blank'>условиями обработки персональных данных</a></p>}\n                        />\n                        <p className='text-red'>{errors.agree && errors.agree.message}</p>\n                    </div>\n                </div>\n\n                <div className=\"mx-auto\" style={{ width: 'fit-content', display: 'grid' }}>\n                    <button className='btn grid mt-8 py-4 px-8' type='submit'>\n                        <span>сохранить</span>\n                        <img src={arr} alt=\"\" />\n                    </button>\n\n                </div>\n            </form>\n        </div>\n    )\n\n}"]},"metadata":{},"sourceType":"module"}