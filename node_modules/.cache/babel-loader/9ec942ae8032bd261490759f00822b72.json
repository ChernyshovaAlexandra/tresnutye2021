{"ast":null,"code":"import _classCallCheck from\"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from\"react-redux\";import{editUserInfo as _editUserInfo,handleUpdateUser as _handleUpdateUser,loading as _loading}from'../../store/actions';import UserAccount from'./UserAccount';import{REGION_LIST}from'../Map/REGION_LIST.js';import{Select,FormControl,InputLabel,MenuItem}from\"@material-ui/core\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserForm=/*#__PURE__*/function(_React$Component){_inherits(UserForm,_React$Component);var _super=_createSuper(UserForm);function UserForm(props){var _this;_classCallCheck(this,UserForm);_this=_super.call(this,props);_this.init=function(){var _this$props=_this.props,userName=_this$props.userName,userLastName=_this$props.userLastName,userEmail=_this$props.userEmail,userBirthDate=_this$props.userBirthDate,userPhone=_this$props.userPhone,region=_this$props.region,token=_this$props.token;_this.setState({edit:true,loading:false,userData:{name:userName,lastName:userLastName,email:userEmail,birth:userBirthDate,phone:userPhone,region:region,token:token}});};_this.changeData=function(e,item){e.preventDefault();var userData=_this.state.userData,userDataPrev=userData;userDataPrev[item]=e.target.value;_this.setState({userData:userDataPrev});};_this.submitUserForm=function(e){var _this$props2=_this.props,handleUpdateUser=_this$props2.handleUpdateUser,loading=_this$props2.loading;var userData=_this.state.userData;e.preventDefault();loading(true);var token=window.localStorage.getItem('userToken');handleUpdateUser(userData,token);//window.ym(10665502,'reachGoal','mandarim-reg')\nsetTimeout(function(){loading(false);},800);};_this.state={edit:false,loading:true,regions:REGION_LIST,userData:{name:'',lastName:'',email:'',birth:'',phone:'',token:'',region:''}};return _this;}_createClass(UserForm,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var _this$props3=this.props,loading=_this$props3.loading,userName=_this$props3.userName;loading(true);setTimeout(function(){if(userName){_this2.init();}loading(false);},800);}},{key:\"render\",value:function render(){var _this3=this;var _this$props4=this.props,edit=_this$props4.edit,loader=_this$props4.loader,systemMessage=_this$props4.systemMessage,userName=_this$props4.userName,confirmedRules=_this$props4.confirmedRules,checks=_this$props4.checks;var _this$state$userData=this.state.userData,name=_this$state$userData.name,lastName=_this$state$userData.lastName,region=_this$state$userData.region,email=_this$state$userData.email,birth=_this$state$userData.birth;var regions=this.state.regions;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12\",children:loader?/*#__PURE__*/_jsx(\"div\",{className:\"loader-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loader\"})}):!userName||edit?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-violet text-5xl mb-4\",children:\"\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F \"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-violet\",children:\"\\u041F\\u0440\\u0438\\u043D\\u044F\\u0442\\u044C \\u0443\\u0447\\u0430\\u0441\\u0442\\u0438\\u0435 \\u0432 \\u0440\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448\\u0435 \\u043C\\u043E\\u0433\\u0443\\u0442 \\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u043B\\u0438\\u0446\\u0430, \\u0434\\u043E\\u0441\\u0442\\u0438\\u0433\\u0448\\u0438\\u0435 18 \\u043B\\u0435\\u0442\"})]})})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return _this3.submitUserForm(e);},style:{paddingBottom:'50px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",className:\"w-full \",name:\"user_\",id:\"user_\",placeholder:\"\\u0418\\u043C\\u044F\",value:name&&name,onChange:function onChange(e){_this3.changeData(e,'name');}})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",className:\" w-full \",name:\"user_\",id:\"user_\",placeholder:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\",value:lastName&&lastName,onChange:function onChange(e){_this3.changeData(e,'lastName');}})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"email\",className:\" w-full \",name:\"user_\",id:\"user_\",placeholder:\"E-mail\",value:email&&email,onChange:function onChange(e){_this3.changeData(e,'email');}})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(\"input\",{required:true,type:\"number\",className:\" w-full \",name:\"user_age\",id:\"user_age\",placeholder:\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442\",value:birth&&birth,onChange:function onChange(e){_this3.changeData(e,'birth');}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"outlined-age-native-simple\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0433\\u0438\\u043E\\u043D\"}),/*#__PURE__*/_jsx(Select,{labelId:\"demo-customized-select-label\",id:\"demo-customized-select\",value:region,onChange:function onChange(e){_this3.changeData(e,'region');},label:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0433\\u0438\\u043E\\u043D\",inputProps:{name:\"Выберите регион  \",id:\"outlined-age-native-simple\"},children:regions.map(function(item,index){return/*#__PURE__*/_jsx(MenuItem,{value:item.city,children:item.city},index);})})]})})]}),!confirmedRules&&/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row politics\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"user_accept\",id:\"user_accept\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"user_accept\",className:\"check-box\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u042F \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0435\\u043D \\u0441\",' ',/*#__PURE__*/_jsx(\"a\",{className:\"btnLink orange\",href:\"https://dixy.ru/politika-obrabotki-i-zashity.pdf\",target:\"_blank\",children:\"\\u041F\\u043E\\u043B\\u0438\\u0442\\u0438\\u043A\\u043E\\u0439 \\u041A\\u043E\\u043D\\u0444\\u0438\\u0434\\u0435\\u043D\\u0446\\u0438\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438 \\u0438 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0438 \\u043C\\u043E\\u0438\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"}),\", \\u043E\\u0437\\u043D\\u0430\\u043A\\u043E\\u043C\\u043B\\u0435\\u043D \\u0441 \\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0430\\u043C\\u0438 \\u0430\\u043A\\u0446\\u0438\\u0438.\"]})]})})}),systemMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-auto systemMessage mt-4 text-center\",children:systemMessage}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto\",style:{width:'fit-content',display:'grid'},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn grid mt-8 py-4 px-8\",type:\"submit\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})})]})]}):/*#__PURE__*/_jsx(UserAccount,{})})})});}}]);return UserForm;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{codeVerified:state.store.codeVerified,token:state.store.token,userName:state.store.userName,userLastName:state.store.userLastName,userEmail:state.store.userEmail,userBirthDate:state.store.userBirthDate,userPhone:state.store.userPhone,region:state.store.region,edit:state.store.edit,loader:state.store.loader,systemMessage:state.store.systemMessage,confirmedRules:state.store.confirmedRules};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{editUserInfo:function editUserInfo(action){return dispatch(_editUserInfo(action));},handleUpdateUser:function handleUpdateUser(userData,token){return dispatch(_handleUpdateUser(userData,token));},loading:function loading(action){return dispatch(_loading(action));}};};export default connect(mapStateToProps,mapDispatchToProps)(UserForm);","map":{"version":3,"sources":["/Users/alexandrach/Projects/tresnutye2021/src/components/FormComponent/UserForm.jsx"],"names":["React","connect","editUserInfo","handleUpdateUser","loading","UserAccount","REGION_LIST","Select","FormControl","InputLabel","MenuItem","UserForm","props","init","userName","userLastName","userEmail","userBirthDate","userPhone","region","token","setState","edit","userData","name","lastName","email","birth","phone","changeData","e","item","preventDefault","state","userDataPrev","target","value","submitUserForm","window","localStorage","getItem","setTimeout","regions","loader","systemMessage","confirmedRules","checks","paddingBottom","id","map","index","city","width","display","Component","mapStateToProps","codeVerified","store","mapDispatchToProps","dispatch","action"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { editUserInfo, handleUpdateUser, loading } from '../../store/actions';\nimport UserAccount from './UserAccount'\nimport { REGION_LIST } from '../Map/REGION_LIST.js'\nimport { Select, FormControl, InputLabel, MenuItem } from \"@material-ui/core\";\n\n\n\nclass UserForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            edit: false,\n            loading: true,\n\n            regions: REGION_LIST,\n            userData: {\n                name: '',\n                lastName: '',\n                email: '',\n                birth: '',\n                phone: '',\n                token: '',\n                region: '',\n            },\n        }\n    }\n    init = () => {\n        const { userName, userLastName, userEmail, userBirthDate, userPhone, region, token } = this.props\n        this.setState({\n            edit: true,\n            loading: false,\n            userData: {\n                name: userName,\n                lastName: userLastName,\n                email: userEmail,\n                birth: userBirthDate,\n                phone: userPhone,\n                region: region,\n                token: token\n            }\n        })\n\n    }\n\n\n    componentDidMount() {\n        const { loading, userName } = this.props\n        loading(true)\n        setTimeout(() => {\n            if (userName) {\n                this.init()\n            }\n            loading(false)\n        }, 800)\n    }\n\n\n    changeData = (e, item) => {\n        e.preventDefault()\n        let { userData } = this.state,\n            userDataPrev = userData\n        userDataPrev[item] = e.target.value\n        this.setState({\n            userData: userDataPrev\n        })\n    }\n\n    submitUserForm = (e) => {\n        const { handleUpdateUser, loading } = this.props\n        const { userData } = this.state\n        e.preventDefault()\n        loading(true)\n        let token = window.localStorage.getItem('userToken')\n        handleUpdateUser(userData, token)\n        //window.ym(10665502,'reachGoal','mandarim-reg')\n        setTimeout(() => {\n            loading(false)\n        }, 800)\n    }\n\n    render() {\n        const { edit, loader, systemMessage, userName, confirmedRules, checks } = this.props\n\n        const {\n            name,\n            lastName,\n            region,\n            email,\n            birth\n        } = this.state.userData\n        const { regions } = this.state\n\n        return (\n            <>\n                <div className=\"row justify-content-center\">\n                    <div className=\"col-lg-12\">\n                        {loader ?\n                            <div className=\"loader-container\">\n                                <div className=\"loader\"></div>\n                            </div>\n                            :\n\n                            !userName || edit ?\n                                <>\n                                    <header >\n                                        <div className=\"row justify-content-center\">\n                                            <div className=\"col-lg-auto\">\n                                                <h2 className='text-violet text-5xl mb-4'>\n                                                    регистрация </h2>\n                                                    <p className='text-violet'>Принять участие в розыгрыше могут только лица, достигшие 18 лет</p>\n                                            </div>\n                                        </div>\n                                    </header>\n                                    <form onSubmit={(e) => this.submitUserForm(e)} style={{ paddingBottom: '50px' }}>\n                                        <div className=\"grid grid-cols-2 gap-4\">\n\n                                            <div className=\"w-full\">\n                                                <input\n                                                    required\n                                                    type=\"text\"\n                                                    className=\"w-full \"\n                                                    name=\"user_\" id=\"user_\"\n                                                    placeholder=\"Имя\"\n                                                    value={name && name}\n                                                    onChange={(e) => { this.changeData(e, 'name') }}\n                                                />\n                                            </div>\n                                            <div className=\"w-full\">\n                                                <input\n                                                    required\n                                                    type=\"text\"\n                                                    className=\" w-full \"\n                                                    name=\"user_\" id=\"user_\"\n                                                    placeholder=\"Фамилия\"\n                                                    value={lastName && lastName}\n                                                    onChange={(e) => { this.changeData(e, 'lastName') }}\n                                                />\n                                            </div>\n                                            <div className=\"w-full\">\n                                                <input\n                                                    required\n                                                    type=\"email\"\n                                                    className=\" w-full \"\n                                                    name=\"user_\" id=\"user_\"\n                                                    placeholder=\"E-mail\"\n                                                    value={email && email}\n                                                    onChange={(e) => { this.changeData(e, 'email') }}\n                                                />\n                                            </div>\n                                            <div className=\"w-full\">\n                                                <input\n                                                    required\n                                                    type=\"number\"\n                                                    className=\" w-full \"\n                                                    name=\"user_age\" id=\"user_age\"\n                                                    placeholder=\"Возраст\"\n                                                    value={birth && birth}\n                                                    onChange={(e) => { this.changeData(e, 'birth') }}\n                                                />\n                                            </div>\n                                            <div className=\"col-lg-6\">\n                                                <FormControl variant=\"outlined\">\n                                                    <InputLabel htmlFor=\"outlined-age-native-simple\">\n                                                        Выберите регион\n                                                    </InputLabel>\n                                                    <Select\n                                                        labelId=\"demo-customized-select-label\"\n                                                        id=\"demo-customized-select\"\n                                                        value={region}\n                                                        onChange={(e) => { this.changeData(e, 'region') }}\n                                                        label=\"Выберите регион\"\n                                                        inputProps={{\n                                                            name: \"Выберите регион  \",\n                                                            id: \"outlined-age-native-simple\",\n                                                        }}\n                                                    >\n                                                        {regions.map((item, index) => (\n                                                            <MenuItem value={item.city} key={index}>{item.city}</MenuItem>\n                                                        ))}\n                                                    </Select>\n                                                </FormControl>\n                                            </div>\n                                           \n                                        </div>\n                                        {!confirmedRules && <div className=\"row justify-content-center\">\n                                            <div className=\"col-lg-auto\">\n                                                <div className=\"row politics\">\n                                                    <input\n                                                        type=\"checkbox\"\n                                                        name=\"user_accept\"\n                                                        id=\"user_accept\"\n                                                        required\n                                                    />\n                                                    <label htmlFor=\"user_accept\" className=\"check-box\"></label>\n                                                    <p>Я согласен с{' '}\n                                                        <a\n                                                            className=\"btnLink orange\"\n                                                            href=\"https://dixy.ru/politika-obrabotki-i-zashity.pdf\"\n                                                            target=\"_blank\">Политикой Конфиденциальности и обработки моих данных</a>, ознакомлен с правилами акции.\n                                                    </p>\n                                                </div>\n                                            </div>\n                                        </div>}\n                                        {systemMessage && <div className=\"col-lg-auto systemMessage mt-4 text-center\">{systemMessage}</div>}\n                                        <div className=\"mx-auto\" style={{ width: 'fit-content', display: 'grid' }}>\n                                        <button className='btn grid mt-8 py-4 px-8' type='submit'>\n                                                <span>сохранить</span>\n                                            </button>\n\n                                        </div>\n                                    </form>\n                                </>\n                                : <UserAccount />\n                        }\n                    </div>\n                </div>\n            </>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        codeVerified: state.store.codeVerified,\n        token: state.store.token,\n        userName: state.store.userName,\n        userLastName: state.store.userLastName,\n        userEmail: state.store.userEmail,\n        userBirthDate: state.store.userBirthDate,\n        userPhone: state.store.userPhone,\n        region: state.store.region,\n        edit: state.store.edit,\n        loader: state.store.loader,\n        systemMessage: state.store.systemMessage,\n        confirmedRules: state.store.confirmedRules\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        editUserInfo: (action) => dispatch(editUserInfo(action)),\n        handleUpdateUser: (userData, token) => dispatch(handleUpdateUser(userData, token)),\n        loading: (action) => dispatch(loading(action))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserForm);\n"]},"metadata":{},"sourceType":"module"}