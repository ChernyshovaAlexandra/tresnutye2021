{"ast":null,"code":"import _classCallCheck from \"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/alexandrach/Projects/tresnutye2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/alexandrach/Projects/tresnutye2021/src/components/FormComponent/LoginForm.jsx\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { handleSendCode as _handleSendCode, handleCheckCode as _handleCheckCode, handleCheckToken as _handleCheckToken, GetAllChecks as _GetAllChecks } from '../../store/actions';\nimport Countdown from 'react-countdown';\nimport InputMask from 'react-input-mask';\nimport $ from 'jquery';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar LoginForm = /*#__PURE__*/function (_React$Component) {\n  _inherits(LoginForm, _React$Component);\n\n  var _super = _createSuper(LoginForm);\n\n  function LoginForm(props) {\n    var _this;\n\n    _classCallCheck(this, LoginForm);\n\n    _this = _super.call(this, props);\n\n    _this.changeNumber = function () {\n      _this.setState({\n        phoneNumber: false,\n        timer: false,\n        requestMessage: false,\n        verifyCodeError: false\n      });\n    };\n\n    _this.startTimer = function (e) {\n      var handleSendCode = _this.props.handleSendCode;\n      var phoneNumber = _this.state.phoneNumber;\n      var clearNumber = phoneNumber.replace(/\\s/g, '').replace(/[{()}]/g, '');\n      e.preventDefault();\n\n      _this.setState({\n        timer: true,\n        number: clearNumber.replace('+', ''),\n        code: false\n      });\n\n      handleSendCode(clearNumber.replace('+', ''));\n      $('#user_phone').val('');\n      $('.modalBox').trigger('click');\n    };\n\n    _this.stopTimer = function () {\n      _this.setState({\n        timer: 'ended'\n      });\n\n      var handleSendCode = _this.props.handleSendCode;\n      handleSendCode(_this.state.number);\n      $('.modalBox__container').trigger('click');\n    };\n\n    _this.setPhone = function (e) {\n      _this.setState({\n        phoneNumber: e.target.value\n      });\n    };\n\n    _this.setCode = function (e) {\n      _this.setState({\n        code: e.target.value\n      });\n    };\n\n    _this.submitCode = function () {\n      var _this$props = _this.props,\n          handleCheckCode = _this$props.handleCheckCode,\n          user_id = _this$props.user_id;\n      var _this$state = _this.state,\n          code = _this$state.code,\n          number = _this$state.number;\n      handleCheckCode(number, code);\n      var token = localStorage.getItem('userToken'); //handleCheckToken(token)\n\n      $('.modalBox__container').trigger('click');\n    };\n\n    _this.state = {\n      timer: false,\n      number: false,\n      phoneNumber: '',\n      code: false\n    };\n    return _this;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props, next) {\n      var requestMessage = props.requestMessage,\n          verifyCodeError = props.verifyCodeError;\n      var th = this;\n\n      if (verifyCodeError) {\n        this.setState({\n          verifyCodeError: verifyCodeError\n        });\n      }\n\n      if (requestMessage) {\n        th.setState({\n          timer: false,\n          phoneNumber: false,\n          requestMessage: requestMessage\n        });\n        $('.modalBox__container').trigger('click');\n      }\n\n      $('#user_phone').val('');\n      $('.modalBox__container').trigger('click');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          timer = _this$state2.timer,\n          number = _this$state2.number,\n          requestMessage = _this$state2.requestMessage,\n          code = _this$state2.code,\n          phoneNumber = _this$state2.phoneNumber,\n          verifyCodeError = _this$state2.verifyCodeError;\n\n      var renderer = function renderer(_ref) {\n        var seconds = _ref.seconds,\n            completed = _ref.completed;\n\n        if (completed) {\n          return /*#__PURE__*/_jsxDEV(Completionist, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 24\n          }, _this2);\n        } else if (requestMessage) {\n          return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"formCodeAgain\",\n            children: timer === 'ended' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: \"\\u041A\\u043E\\u0434 \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D \\u043F\\u043E\\u0432\\u0442\\u043E\\u0440\\u043D\\u043E\"\n            }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u043D\\u0430\\u044F \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043A\\u0430 \\u0432\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u0430 \\u0447\\u0435\\u0440\\u0435\\u0437\", ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"orange\",\n                children: seconds\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 33\n              }, _this2), ' ', \" \\u0441\\u0435\\u043A\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 21\n          }, _this2);\n        }\n      };\n\n      var Completionist = function Completionist() {\n        return /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"btnLink orange\",\n          onClick: function onClick() {\n            return _this2.stopTimer();\n          },\n          children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u0432\\u0442\\u043E\\u0440\\u043D\\u043E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, _this2);\n      };\n\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row justify-content-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-orange uppercase golos text-3xl mb-4\",\n                children: \"\\u0432\\u0445\\u043E\\u0434/\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row justify-content-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-12\",\n              children: number && !requestMessage ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"changing-data\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"\\u041C\\u044B \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0438 \\u043A\\u043E\\u0434 \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F \\u043D\\u0430 \\u043D\\u043E\\u043C\\u0435\\u0440 \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"orange\",\n                    children: number\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 80\n                  }, this), \".\", /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"systemMessage forPhone cursor-pointer\",\n                    onClick: function onClick() {\n                      _this2.changeNumber();\n                    },\n                    children: \"(\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043D\\u043E\\u043C\\u0435\\u0440)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 33\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430 \\u0434\\u043B\\u044F \\u0432\\u0445\\u043E\\u0434\\u0430 \\u043D\\u0430 \\u0441\\u0430\\u0439\\u0442. \\u041C\\u044B \\u0432\\u044B\\u0448\\u043B\\u0435\\u043C \\u043A\\u043E\\u0434 \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F \\u0432 \\u0441\\u043C\\u0441.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 35\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modalBox__container__content_main\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            autocomplete: \"off\",\n            onSubmit: function onSubmit(e) {\n              e.preventDefault();\n              !timer && _this2.startTimer(e);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"hidden\",\n              name: \"\",\n              autoComplete: \"false\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 25\n            }, this), verifyCodeError && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-lg-12\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"errorMessage\",\n                  children: verifyCodeError\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-lg-12\",\n                children: [/*#__PURE__*/_jsxDEV(InputMask, {\n                  placeholder: timer ? 'Введите код' : 'Введите номер телефона'\n                  /*{...this.state}*/\n                  ,\n                  mask: timer ? '999999' : \"+7 (999) 999 99 99\",\n                  required: true,\n                  autofill: \"false\",\n                  id: \"user_phone\",\n                  value: timer ? code : phoneNumber,\n                  onChange: timer ? this.setCode : this.setPhone,\n                  maskChar: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 33\n                }, this), requestMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"errorMessage\",\n                  children: requestMessage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 52\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row justify-content-center\",\n              children: timer ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [!requestMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-lg-12 systemMessage mt-4\",\n                  children: /*#__PURE__*/_jsxDEV(Countdown, {\n                    date: Date.now() + 59000,\n                    intervalDelay: 1000,\n                    precision: .3,\n                    renderer: renderer,\n                    children: /*#__PURE__*/_jsxDEV(Completionist, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 57\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-lg-auto\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn grid mt-8 py-4 px-8\",\n                    onClick: function onClick() {\n                      return _this2.submitCode();\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 191,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"systemMessage mt-4\",\n                  children: \"\\u041D\\u0430\\u0436\\u0438\\u043C\\u0430\\u044F \\u043A\\u043D\\u043E\\u043F\\u043A\\u0443 \\xAB\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C\\xBB \\u044F \\u043F\\u0440\\u0438\\u043D\\u0438\\u043C\\u0430\\u044E \\u0443\\u0441\\u043B\\u043E\\u0432\\u0438\\u044F \\u0430\\u043A\\u0446\\u0438\\u0438\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-lg-auto\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-center handleScanContainer__inner--input\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn my-8 mx-auto\",\n                    type: \"submit\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"bg\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 202,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"\\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u043E\\u0434\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true);\n    }\n  }]);\n\n  return LoginForm;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    codeSent: state.store.codeSent,\n    codeVerified: state.store.codeVerified,\n    user_id: state.store.user_id,\n    verifyCodeError: state.store.verifyCodeError,\n    requestMessage: state.store.requestMessage,\n    token: state.store.token\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    // sendUserForm: (form) => dispatch(sendUserForm(form)),\n    handleSendCode: function handleSendCode(userCode) {\n      return dispatch(_handleSendCode(userCode));\n    },\n    handleCheckCode: function handleCheckCode(user_id, userCode) {\n      return dispatch(_handleCheckCode(user_id, userCode));\n    },\n    handleCheckToken: function handleCheckToken(token) {\n      return dispatch(_handleCheckToken(token));\n    },\n    GetAllChecks: function GetAllChecks(token) {\n      return dispatch(_GetAllChecks(token));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);","map":{"version":3,"sources":["/Users/alexandrach/Projects/tresnutye2021/src/components/FormComponent/LoginForm.jsx"],"names":["React","connect","handleSendCode","handleCheckCode","handleCheckToken","GetAllChecks","Countdown","InputMask","$","LoginForm","props","changeNumber","setState","phoneNumber","timer","requestMessage","verifyCodeError","startTimer","e","state","clearNumber","replace","preventDefault","number","code","val","trigger","stopTimer","setPhone","target","value","setCode","submitCode","user_id","token","localStorage","getItem","next","th","renderer","seconds","completed","Completionist","Date","now","Component","mapStateToProps","codeSent","store","codeVerified","mapDispatchToProps","dispatch","userCode"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { handleSendCode, handleCheckCode, handleCheckToken, GetAllChecks } from '../../store/actions';\nimport Countdown from 'react-countdown';\nimport InputMask from 'react-input-mask';\n\nimport $ from 'jquery'\n\n\n\nclass LoginForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            timer: false,\n            number: false,\n            phoneNumber: '',\n            code: false\n        }\n    }\n    changeNumber = () => {\n        this.setState({\n            phoneNumber: false,\n            timer: false,\n            requestMessage: false,\n            verifyCodeError: false\n        })\n    }\n    // Повторно можно отправить код через... и отправка кода на номер\n    startTimer = (e) => {\n        const { handleSendCode } = this.props\n        const { phoneNumber } = this.state\n\n        let clearNumber = phoneNumber.replace(/\\s/g, '').replace(/[{()}]/g, '')\n        e.preventDefault()\n        this.setState({\n            timer: true,\n            number: clearNumber.replace('+', ''),\n            code: false\n        })\n        handleSendCode(clearNumber.replace('+', ''))\n        $('#user_phone').val('')\n        $('.modalBox').trigger('click')\n    }\n\n    // Код отправлен повторно\n    stopTimer = () => {\n        this.setState({\n            timer: 'ended'\n        })\n        const { handleSendCode } = this.props\n        handleSendCode(this.state.number)\n        $('.modalBox__container').trigger('click')\n    }\n\n    // Установить номер телефона\n    setPhone = e => {\n        this.setState({ phoneNumber: e.target.value })\n    }\n\n    // Ввести код\n    setCode = e => {\n        this.setState({ code: e.target.value })\n    }\n\n    // подтвердить код\n    submitCode = () => {\n        const { handleCheckCode, user_id } = this.props\n        const { code, number } = this.state\n        handleCheckCode(number, code)\n        let token = localStorage.getItem('userToken')\n        //handleCheckToken(token)\n        $('.modalBox__container').trigger('click')\n    }\n\n\n    componentWillReceiveProps(props, next) {\n        const { requestMessage, verifyCodeError } = props\n        let th = this\n        if (verifyCodeError) {\n            this.setState({ verifyCodeError: verifyCodeError })\n        }\n        if (requestMessage) {\n            th.setState({ timer: false, phoneNumber: false, requestMessage: requestMessage })\n            $('.modalBox__container').trigger('click')\n        }\n        $('#user_phone').val('')\n        $('.modalBox__container').trigger('click')\n\n    }\n    render() {\n\n        const { timer, number, requestMessage, code, phoneNumber, verifyCodeError } = this.state\n\n        const renderer = ({ seconds, completed }) => {\n            if (completed) {\n                return <Completionist />;\n            } else if (requestMessage) {\n\n                return <></>\n            } else {\n                return (\n                    <p className=\"formCodeAgain\" >\n                        {timer === 'ended' ?\n                            <>Код отправлен повторно</> :\n                            <>\n                                Повторная отправка возможна через{' '}\n                                <span className=\"orange\">{seconds}</span>{' '} сек\n                            </>\n                        }\n                    </p >)\n\n\n            }\n        };\n        const Completionist = () => (\n            <a className=\"btnLink orange\"\n                onClick={() => this.stopTimer()}\n            >Отправить повторно</a>\n        );\n\n        return (\n            <>\n                <header>\n                    <div className=\"row justify-content-center\">\n                        <div className=\"col-lg-auto\">\n                            <h2 className='text-orange uppercase golos text-3xl mb-4'>\n                                вход/регистрация </h2>\n                        </div>\n                    </div>\n                    <div className=\"row justify-content-center\">\n                        <div className=\"col-lg-12\">\n                            {number && !requestMessage ?\n                                <div className=\"changing-data\">\n                                    <p>Мы отправили код подтверждения на номер <span className=\"orange\">{number}</span>.\n                                        <p\n                                            className=\"systemMessage forPhone cursor-pointer\"\n                                            onClick={() => {\n                                                this.changeNumber()\n                                            }}\n                                        >(Изменить номер)</p></p>\n                                </div>\n                                : <p>Введите номер телефона для входа на сайт. Мы вышлем код подтверждения в смс.</p>}\n                        </div>\n                    </div>\n                </header>\n                <div className=\"modalBox__container__content_main\">\n                    <form\n                        autocomplete=\"off\"\n                        onSubmit={(e) => {\n                            e.preventDefault()\n                            !timer && this.startTimer(e)\n                        }}\n                    >\n                        <input type=\"hidden\" name=\"\" autoComplete=\"false\" />\n                        {verifyCodeError &&\n                            <div className=\"row\">\n                                <div className=\"col-lg-12\">\n                                    <p className=\"errorMessage\">{verifyCodeError}</p>\n                                </div>\n                            </div>}\n                        <div className=\"row\">\n                            <div className=\"col-lg-12\">\n\n                                <InputMask\n                                    placeholder={timer ? 'Введите код' : 'Введите номер телефона'}\n                                    /*{...this.state}*/\n                                    mask={timer ? '999999' : \"+7 (999) 999 99 99\"}\n                                    required\n                                    autofill='false'\n                                    id=\"user_phone\"\n                                    value={timer ? code : phoneNumber}\n                                    onChange={timer ? this.setCode : this.setPhone}\n                                    maskChar=\"\" />\n                                {requestMessage && <p className=\"errorMessage\">{requestMessage}</p>}\n                            </div>\n                        </div>\n                        <div className=\"row justify-content-center\">\n\n                            {timer ?\n                                <>\n                                    {!requestMessage && <p className=\"col-lg-12 systemMessage mt-4\">\n                                        <Countdown date={Date.now() + 59000} intervalDelay={1000} precision={.3} renderer={renderer}>\n                                            <Completionist />\n                                        </Countdown>\n                                    </p>}\n                                    <div className=\"col-lg-auto\">\n                                            <button className='btn grid mt-8 py-4 px-8'\n                                                onClick={() => this.submitCode()}\n                                            >\n                                                <span>Подтвердить</span>\n                                            </button>\n                                    </div>\n\n                                    <p className='systemMessage mt-4'>Нажимая кнопку «Подтвердить» я принимаю условия акции</p>\n\n                                </>\n                                :\n                                <div className=\"col-lg-auto\">\n                                    <div className=\"flex justify-center handleScanContainer__inner--input\">\n                                        <button className='btn my-8 mx-auto' type='submit'>\n                                            <div className='bg'></div>\n                                            <span>отправить код</span>\n                                        </button>\n                                    </div>\n                                </div>\n                            }\n                        </div>\n\n                    </form>\n                </div>\n            </>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        codeSent: state.store.codeSent,\n        codeVerified: state.store.codeVerified,\n        user_id: state.store.user_id,\n        verifyCodeError: state.store.verifyCodeError,\n        requestMessage: state.store.requestMessage,\n        token: state.store.token\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        // sendUserForm: (form) => dispatch(sendUserForm(form)),\n        handleSendCode: userCode => dispatch(handleSendCode(userCode)),\n        handleCheckCode: (user_id, userCode) => dispatch(handleCheckCode(user_id, userCode)),\n        handleCheckToken: (token) => dispatch(handleCheckToken(token)),\n        GetAllChecks: (token) => dispatch(GetAllChecks(token)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\n"]},"metadata":{},"sourceType":"module"}